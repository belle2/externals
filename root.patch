diff --git a/html/src/TClassDocOutput.cxx b/html/src/TClassDocOutput.cxx
index eada52e..ad32dea 100644
--- a/html/src/TClassDocOutput.cxx
+++ b/html/src/TClassDocOutput.cxx
@@ -81,7 +81,7 @@ void TClassDocOutput::Class2Html(Bool_t force)
 
    if (!force && !IsModified(fCurrentClass, kSource)
        && !IsModified(fCurrentClass, kDoc)) {
-      Printf(fHtml->GetCounterFormat(), "-no change-", fHtml->GetCounter(), filename.Data());
+//      Printf(fHtml->GetCounterFormat(), "-no change-", fHtml->GetCounter(), filename.Data());
       return;
    }
 
@@ -93,8 +93,14 @@ void TClassDocOutput::Class2Html(Bool_t force)
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
+//   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
+   printf("  <compound kind=\"class\">\n");
+   printf("    <name>%s</name>\n", TString(fCurrentClass->GetName()).ReplaceAll("&", "&amp;").ReplaceAll("<", "&lt;").ReplaceAll(">", "&gt;").Data());
+   TString tmp;
+   fHtml->GetHtmlFileName(fCurrentClass, tmp);
+   printf("    <filename>%s</filename>\n", tmp.ReplaceAll("./", "").Data());
 
+#ifdef DETAILED_DOXYGEN_TAGS
    // write a HTML header for the classFile file
    WriteHtmlHeader(classFile, fCurrentClass->GetName(), "", fCurrentClass);
    WriteClassDocHeader(classFile);
@@ -112,6 +118,9 @@ void TClassDocOutput::Class2Html(Bool_t force)
       fParser->GetSourceInfo(TDocParser::kInfoLastUpdate),
       fParser->GetSourceInfo(TDocParser::kInfoAuthor),
       fParser->GetSourceInfo(TDocParser::kInfoCopyright));
+#endif
+
+   printf("  </compound>\n");
 }
 
 //______________________________________________________________________________
@@ -158,12 +167,21 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
       TDocMethodWrapper *methWrap = 0;
       while ((methWrap = (TDocMethodWrapper*) iMethWrap())) {
          const TMethod* method = methWrap->GetMethod();
+         printf("    <member kind=\"function\"");
+         if (access != TDocParser::kPublic) {
+           printf(" protection=\"%s\"", accesstxt[access]);
+         }
+         if (kIsStatic & method->Property()) {
+           printf(" static=\"yes\"");
+         }
+         printf(">\n");
 
          // it's a c'tor - Cint stores the class name as return type
          Bool_t isctor = (!strcmp(method->GetName(), method->GetReturnTypeName()));
          // it's a d'tor - Cint stores "void" as return type
          Bool_t isdtor = (!isctor && method->GetName()[0] == '~');
 
+         printf("      <type>");
          classFile << "<tr class=\"func";
          if (method->GetClass() != fCurrentClass)
             classFile << "inh";
@@ -173,16 +191,25 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
                classFile << "virtual ";
             else
                classFile << " virtual";
+            printf("virtual ");
          }
 
-         if (kIsStatic & method->Property())
+         if (kIsStatic & method->Property()) {
             classFile << "static ";
+            printf("static ");
+         }
 
-         if (!isctor && !isdtor)
+         if (!isctor && !isdtor) {
             fParser->DecorateKeywords(classFile, method->GetReturnTypeName());
+            printf(method->GetReturnTypeName());
+         }
+         printf("</type>\n");
 
          TString mangledM(method->GetClass()->GetName());
          NameSpace2FileName(mangledM);
+         TString tmp;
+         fHtml->GetHtmlFileName(method->GetClass(), tmp);
+         printf("      <anchorfile>%s</anchorfile>\n", tmp.ReplaceAll("./", "").Data());
          classFile << "</td><td class=\"funcname\"><a class=\"funcname\" href=\"";
          if (method->GetClass() != fCurrentClass) {
             TString htmlFile;
@@ -191,6 +218,7 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
          }
          classFile << "#" << mangledM;
          classFile << ":";
+         printf("      <anchor>%s:", mangledM.Data());
          mangledM = method->GetName();
          NameSpace2FileName(mangledM);
          Int_t overloadIdx = methWrap->GetOverloadIdx();
@@ -199,6 +227,7 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
             mangledM += overloadIdx;
          }
          classFile << mangledM << "\">";
+         printf("%s</anchor>\n", mangledM.Data());
          if (method->GetClass() != fCurrentClass) {
             classFile << "<span class=\"baseclass\">";
             ReplaceSpecialChars(classFile, method->GetClass()->GetName());
@@ -206,8 +235,10 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
          }
          ReplaceSpecialChars(classFile, method->GetName());
          classFile << "</a>";
+         printf("      <name>%s</name>\n", method->GetName());
 
          fParser->DecorateKeywords(classFile, const_cast<TMethod*>(method)->GetSignature());
+         printf("      <arglist>%s</arglist>\n", TString(const_cast<TMethod*>(method)->GetSignature()).ReplaceAll("&", "&amp;").ReplaceAll("\"", "&quot;").Data());
          bool propSignal = false;
          bool propMenu   = false;
          bool propToggle = false;
@@ -232,6 +263,7 @@ void TClassDocOutput::ListFunctions(std::ostream& classFile)
             }
          }
          classFile << "</td></tr>" << endl;
+         printf("    </member>\n");
       }
       classFile << endl << "</table></div>" << endl;
    }
@@ -283,6 +315,7 @@ void  TClassDocOutput::ListDataMembers(std::ostream& classFile)
       Bool_t prevIsInh = kTRUE;
 
       while ((member = (TDataMember*) iDM())) {
+         TString anchorfile, anchor;
          Bool_t haveNewEnum = access > 2 && prevEnumName != member->GetTypeName();
          if (haveNewEnum) {
             if (prevEnumName.Length()) {
@@ -311,6 +344,10 @@ void  TClassDocOutput::ListDataMembers(std::ostream& classFile)
                classFile << "enum ";
             else 
                startClassName = 5;
+            printf("    <member kind=\"enumeration\">\n");
+            if (!enumName.EndsWith("<i>[unnamed]</i>")) {
+              printf("      <name>%s</name>\n", enumName.Data());
+            }
             
             Ssiz_t endClassName = enumName.Last(':'); // need template handling here!
             if (endClassName != kNPOS && endClassName > 0 && enumName[endClassName - 1] == ':') {
@@ -332,6 +369,8 @@ void  TClassDocOutput::ListDataMembers(std::ostream& classFile)
 
          TString mangledM(member->GetClass()->GetName());
          NameSpace2FileName(mangledM);
+         fHtml->GetHtmlFileName(member->GetClass(), anchorfile);
+         anchorfile.ReplaceAll("./", "");
          classFile << "</td><td class=\"dataname\"><a ";
          if (member->GetClass() != fCurrentClass) {
             classFile << "href=\"";
@@ -342,9 +381,12 @@ void  TClassDocOutput::ListDataMembers(std::ostream& classFile)
             classFile << "name=\"";
          classFile << mangledM;
          classFile << ":";
+         anchor = mangledM;
+         anchor += ":";
          mangledM = member->GetName();
          NameSpace2FileName(mangledM);
          classFile << mangledM << "\">";
+         anchor += mangledM;
          if (member->GetClass() == fCurrentClass)
             classFile << "</a>";
          if (access < 3 && member->GetClass() != fCurrentClass) {
@@ -369,6 +411,29 @@ void  TClassDocOutput::ListDataMembers(std::ostream& classFile)
             ReplaceSpecialChars(classFile, member->GetTitle());
          } else classFile << "<td>";
          classFile << "</td></tr>" << endl;
+
+         if (haveNewEnum) {
+           printf("      <anchor>%s</anchor>\n", anchor.Data());
+           printf("      <anchorfile>%s</anchorfile>\n", anchorfile.Data());
+           printf("    </member>\n");
+         }
+         if (access > 2) {
+           printf("    <member kind=\"enumvalue\">\n");
+         } else {
+           printf("    <member kind=\"variable\"");
+           if (access != TDocParser::kPublic) {
+             printf(" protection=\"%s\"", accesstxt[access]);
+           }
+           if (member->Property() & G__BIT_ISSTATIC) {
+             printf(" static=\"yes\"");
+           }
+           printf(">\n");
+           printf("      <type>%s</type>\n", fHtml->ShortType(member->GetFullTypeName()));
+         }
+         printf("      <name>%s</name>\n", member->GetName());
+         printf("      <anchor>%s</anchor>\n", anchor.Data());
+         printf("      <anchorfile>%s</anchorfile>\n", anchorfile.Data());
+         printf("    </member>\n");
       } // for members
 
       if (prevEnumName.Length()) {
@@ -605,8 +670,8 @@ void TClassDocOutput::ClassTree(TVirtualPad * psCanvas, Bool_t force)
       gErrorIgnoreLevel = kWarning;
       psCanvas->SaveAs(filename);
       gErrorIgnoreLevel = saveErrorIgnoreLevel;
-   } else
-      Printf(fHtml->GetCounterFormat(), "-no change-", "", filename.Data());
+   }// else
+//      Printf(fHtml->GetCounterFormat(), "-no change-", "", filename.Data());
 }
 
 //______________________________________________________________________________
@@ -1153,7 +1218,7 @@ Bool_t TClassDocOutput::CreateHierarchyDot()
       return kFALSE;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), (filename + ".html").Data());
+//   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), (filename + ".html").Data());
    // write out header
    WriteHtmlHeader(out, "Class Hierarchy");
    out << "<h1>Class Hierarchy</h1>" << endl;
@@ -1303,7 +1368,7 @@ void TClassDocOutput::MakeTree(Bool_t force /*= kFALSE*/)
    if (!htmlFile.Length()) {
       TString what(fCurrentClass->GetName());
       what += " (source not found)";
-      Printf(fHtml->GetCounterFormat(), "-skipped-", "", what.Data());
+//      Printf(fHtml->GetCounterFormat(), "-skipped-", "", what.Data());
       return;
    }
 
diff --git a/html/src/TDocOutput.cxx b/html/src/TDocOutput.cxx
index caa8e9f..28ed141 100644
--- a/html/src/TDocOutput.cxx
+++ b/html/src/TDocOutput.cxx
@@ -650,7 +650,7 @@ void TDocOutput::CreateHierarchy()
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
+//   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
 
    // write out header
    WriteHtmlHeader(out, "Class Hierarchy");
@@ -704,7 +704,7 @@ void TDocOutput::CreateClassIndex()
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
+//   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
 
    // write indexFile header
    WriteHtmlHeader(indexFile, "Class Index");
@@ -833,7 +833,7 @@ void TDocOutput::CreateModuleIndex()
          Error("CreateModuleIndex", "Can't open file '%s' !", filename.Data());
          continue;
       }
-      Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
+//      Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), filename.Data());
 
       TString htmltitle("Index of ");
       TString moduletitle(module->GetName());
@@ -1102,7 +1102,7 @@ void TDocOutput::CreateModuleIndex()
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), (dotfilename + ".html").Data());
+//   Printf(fHtml->GetCounterFormat(), "", fHtml->GetCounter(), (dotfilename + ".html").Data());
    // write out header
    WriteHtmlHeader(out, "Library Dependencies");
 
@@ -1135,7 +1135,7 @@ void TDocOutput::CreateProductIndex()
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", "", outFile.Data());
+//   Printf(fHtml->GetCounterFormat(), "", "", outFile.Data());
 
    WriteHtmlHeader(out, GetHtml()->GetProductName() + " Reference Guide");
 
@@ -1282,7 +1282,7 @@ void TDocOutput::CreateTypeIndex()
       return;
    }
 
-   Printf(fHtml->GetCounterFormat(), "", "", outFile.Data());
+//   Printf(fHtml->GetCounterFormat(), "", "", outFile.Data());
 
    // write typesList header
    WriteHtmlHeader(typesList, "List of data types");
diff --git a/montecarlo/eg/inc/TDatabasePDG.h b/montecarlo/eg/inc/TDatabasePDG.h
index 12c4f22..a6f2e2e 100644
--- a/montecarlo/eg/inc/TDatabasePDG.h
+++ b/montecarlo/eg/inc/TDatabasePDG.h
@@ -58,7 +58,9 @@ public:
                                        const char*  ParticleClass,
                                        Int_t        PdgCode,
                                        Int_t        Anti=-1,
-                                       Int_t        TrackingCode=0);
+                                       Int_t        TrackingCode=0,
+                                       Double_t Lifetime = 0.0,
+                                       Double_t Spin = 0.0);
 
    virtual Int_t  ConvertGeant3ToPdg(Int_t Geant3Number) const;
    virtual Int_t  ConvertPdgToGeant3(Int_t pdgNumber) const;
@@ -84,6 +86,8 @@ public:
    virtual void   ReadPDGTable (const char *filename = "");
    virtual Int_t  WritePDGTable(const char *filename);
 
+   virtual void   ReadEvtGenTable(const char* filename);
+
    ClassDef(TDatabasePDG,2)  // PDG particle database
 
 };
diff --git a/montecarlo/eg/inc/TParticlePDG.h b/montecarlo/eg/inc/TParticlePDG.h
index 0ce32b3..27e6a91 100644
--- a/montecarlo/eg/inc/TParticlePDG.h
+++ b/montecarlo/eg/inc/TParticlePDG.h
@@ -63,7 +63,7 @@ public:
    TParticlePDG(const char* Name, const char* Title, Double_t Mass,
                 Bool_t Stable, Double_t Width, Double_t Charge,
                 const char* ParticleClass, Int_t PdgCode, Int_t Anti, 
-                Int_t TrackingCode);
+                Int_t TrackingCode, Double_t Lifetime = 0.0, Double_t Spin = 0.0);
 
    virtual ~TParticlePDG();
    // ****** access methods
diff --git a/montecarlo/eg/src/TDatabasePDG.cxx b/montecarlo/eg/src/TDatabasePDG.cxx
index 87d7f84..2c93245 100644
--- a/montecarlo/eg/src/TDatabasePDG.cxx
+++ b/montecarlo/eg/src/TDatabasePDG.cxx
@@ -19,6 +19,7 @@
 #include "TDecayChannel.h"
 #include "TParticlePDG.h"
 #include <stdlib.h>
+#include <fstream>
 
 
 ////////////////////////////////////////////////////////////////////////
@@ -118,7 +119,9 @@ TParticlePDG* TDatabasePDG::AddParticle(const char *name, const char *title,
                                         const char* ParticleClass,
                                         Int_t PDGcode,
                                         Int_t Anti,
-                                        Int_t TrackingCode)
+                                        Int_t TrackingCode,
+                                        Double_t Lifetime,
+                                        Double_t Spin)
 {
   //
   //  Particle definition normal constructor. If the particle is set to be
@@ -138,7 +141,7 @@ TParticlePDG* TDatabasePDG::AddParticle(const char *name, const char *title,
 
    TParticlePDG* p = new TParticlePDG(name, title, mass, stable, width,
                                      charge, ParticleClass, PDGcode, Anti,
-                                     TrackingCode);
+                                     TrackingCode, Lifetime, Spin);
    fParticleList->Add(p);
    if (fPdgMap)
       fPdgMap->Add((Long_t)PDGcode, (Long_t)p);
@@ -715,6 +718,80 @@ void TDatabasePDG::ReadPDGTable(const char *FileName)
 
 
 //______________________________________________________________________________
+void TDatabasePDG::ReadEvtGenTable(const char* filename)
+{
+   // read list of particles from an EvtGen pdl file
+   // if the particle list does not exist, it is created, otherwise
+   // particles are added to the existing list
+
+   // the code for reading the evt.pdl file is copied from EvtPartPropDb::readPDT
+
+   if (fParticleList == 0) {
+      fParticleList  = new THashList;
+      fListOfClasses = new TObjArray;
+   }
+
+   std::ifstream indec(filename);
+  
+   char cmnd[100], xxxx[100], pname[100];
+   int  stdhepid;
+   double mass, pwidth, pmaxwidth;
+   int    chg3, spin2;
+   double ctau;
+   int    lundkc;
+  
+   if (!indec) {
+      Error("ReadPDGTable","Could not open PDG particle file %s",filename);
+      return;
+   }
+  
+   do{
+    
+      char ch,ch1;
+    
+      do{
+      
+         indec.get(ch);  
+         if (ch=='\n') indec.get(ch);
+         if (ch!='*') {
+	    indec.putback(ch);
+         }
+         else{
+	    while (indec.get(ch1),ch1!='\n');
+         }
+      } while(ch=='*');
+
+      indec >> cmnd;
+
+      if (strcmp(cmnd,"end")){
+      
+         if (!strcmp(cmnd,"add")){
+	
+	    indec >> xxxx >> xxxx >> pname >> stdhepid;
+            indec >> mass >> pwidth >> pmaxwidth >> chg3 >> spin2 >> ctau >> lundkc;
+
+            const double c_mm_per_s = 1e-3 * 2.997925e8;
+            TParticlePDG* part = AddParticle(pname,
+                                             pname,
+                                             mass,
+                                             0,
+                                             pwidth,
+                                             chg3,
+                                             "Unknown",
+                                             stdhepid,
+                                             -1, 0, //anti, trackigCode
+                                             ctau / c_mm_per_s,
+                                             spin2 / 2.0);
+         }
+      }
+   }while(strcmp(cmnd,"end"));
+}
+
+
+
+
+
+//______________________________________________________________________________
 void TDatabasePDG::Browse(TBrowser* b)
 {
    //browse data base
diff --git a/montecarlo/eg/src/TParticlePDG.cxx b/montecarlo/eg/src/TParticlePDG.cxx
index 8d406da..58a75e7 100644
--- a/montecarlo/eg/src/TParticlePDG.cxx
+++ b/montecarlo/eg/src/TParticlePDG.cxx
@@ -99,14 +99,12 @@ TParticlePDG::TParticlePDG(Int_t )
 TParticlePDG::TParticlePDG(const char* Name, const char* Title, Double_t aMass,
                            Bool_t aStable, Double_t aWidth, Double_t aCharge,
                            const char* aParticleClass, Int_t aPdgCode, Int_t Anti,
-                           Int_t aTrackingCode)
+                           Int_t aTrackingCode, Double_t aLifetime, Double_t aSpin)
   : TNamed(Name,Title)
 {
 
    // empty for the time  being
-   fLifetime      = 0;
    fParity        = 0;
-   fSpin          = 0;
    fIsospin       = 0;
    fI3            = 0;
    fStrangeness   = 0;
@@ -125,11 +123,15 @@ TParticlePDG::TParticlePDG(const char* Name, const char* Title, Double_t aMass,
    fPdgCode       = aPdgCode;
    fTrackingCode  = aTrackingCode;
    fDecayList     = NULL;
+   fSpin          = aSpin;
    if (Anti) fAntiParticle = this;
    else      fAntiParticle = 0;
    
    const Double_t kHbar = 6.58211889e-25; // GeV s
-   if (fWidth != 0.) fLifetime = kHbar / fWidth;
+   if (fWidth != 0.)
+       fLifetime = kHbar / fWidth;
+   else
+       fLifetime      = aLifetime;
 }
 
 //______________________________________________________________________________
diff --git a/sql/oracle/inc/TOracleStatement.h b/sql/oracle/inc/TOracleStatement.h
index f8c593f..cdd808c 100644
--- a/sql/oracle/inc/TOracleStatement.h
+++ b/sql/oracle/inc/TOracleStatement.h
@@ -122,7 +122,8 @@ public:
    virtual Bool_t      GetVLong64(Int_t npar, std::vector<Long64_t> &value);
    virtual Bool_t      GetVULong64(Int_t npar, std::vector<ULong64_t> &value);
    virtual Bool_t      GetVDouble(Int_t npar, std::vector<Double_t> &value);
-
+   Bool_t              RegisterOutputParameter(Int_t npar, Int_t type, UInt_t maxsize=0, const std::string &sqltype="");
+   Bool_t              SetBlob(Int_t npar, void* mem, Long_t size, Long_t maxsize = 0x1000);
    ClassDef(TOracleStatement, 0); // SQL statement class for Oracle
 };
 
diff --git a/sql/oracle/src/TOracleStatement.cxx b/sql/oracle/src/TOracleStatement.cxx
index 5c37f38..aceb9e9 100644
--- a/sql/oracle/src/TOracleStatement.cxx
+++ b/sql/oracle/src/TOracleStatement.cxx
@@ -171,7 +171,7 @@ Bool_t TOracleStatement::Process()
    CheckStatement("Process", kFALSE);
 
    try {
-
+ 
       if (IsParSettMode()) {
          fStmt->executeUpdate();
          fWorkingMode = 0;
@@ -374,7 +374,7 @@ Bool_t TOracleStatement::SetBinary(Int_t npar, void* mem, Long_t size, Long_t ma
       Bytes buf((unsigned char*) mem, size);
 
       fStmt->setBytes(npar+1, buf);
-      
+       
       return kTRUE;
 
    } catch (SQLException &oraex)  {
@@ -384,6 +384,37 @@ Bool_t TOracleStatement::SetBinary(Int_t npar, void* mem, Long_t size, Long_t ma
 }   
 
 //______________________________________________________________________________
+Bool_t TOracleStatement::RegisterOutputParameter(Int_t npar, Int_t type, UInt_t maxsize, const std::string &sqltype)
+{
+  fStmt->registerOutParam(npar+1, (Type) type, maxsize, sqltype);
+  return kTRUE;
+}
+
+//______________________________________________________________________________
+Bool_t TOracleStatement::SetBlob(Int_t npar, void* mem, Long_t size, Long_t maxsize)
+{
+   // set parameter value as binary data
+   
+   //CheckSetPar("SetBlob");
+   //CheckGetField("SetBlob", kFALSE);
+   try {
+
+      // this is when NextIteration is called first time
+      //if (fIterCounter==1) 
+      //   fStmt->setMaxParamSize(npar+1, maxsize);      
+
+      Blob blob = fStmt->getBlob(npar+1);
+      blob.write(size,(unsigned char*) mem, size); 
+       
+      return kTRUE;
+
+   } catch (SQLException &oraex)  {
+      SetError(oraex.getErrorCode(), oraex.getMessage().c_str(), "SetBlob");
+   }
+   return kFALSE;
+}   
+
+//______________________________________________________________________________
 Bool_t TOracleStatement::SetDate(Int_t npar, Int_t year, Int_t month, Int_t day)
 {
    // Set date value for parameter npar
diff --git a/sql/pgsql/inc/TPgSQLStatement.h b/sql/pgsql/inc/TPgSQLStatement.h
index b4e1deb..0f9d934 100644
--- a/sql/pgsql/inc/TPgSQLStatement.h
+++ b/sql/pgsql/inc/TPgSQLStatement.h
@@ -53,6 +53,8 @@ private:
    Int_t                 fIterationCount;//! number of iteration
    int                  *fParamLengths;  //! length of column
    int                  *fParamFormats;  //! data type (OID)
+   int                   fResultFormat;  //! result format type
+   Bool_t                fLittleEndian;
    Int_t                 fNumResultRows;
    Int_t                 fNumResultCols;
 
@@ -78,7 +80,10 @@ public:
    virtual Int_t       GetBufferLength() const { return 1; }
    virtual Int_t       GetNumParameters();
 
+   Bool_t SetResultFormat( Int_t binaryformat );
+   const char *        GetNToH(Int_t npar);
    virtual Bool_t      SetNull(Int_t npar);
+   Bool_t  SetBinaryRaw(Int_t npar, void *value, Long_t size);
    virtual Bool_t      SetInt(Int_t npar, Int_t value);
    virtual Bool_t      SetUInt(Int_t npar, UInt_t value);
    virtual Bool_t      SetLong(Int_t npar, Long_t value);
@@ -117,6 +122,8 @@ public:
    virtual Bool_t      GetTime(Int_t npar, Int_t& hour, Int_t& min, Int_t& sec);
    virtual Bool_t      GetDatime(Int_t npar, Int_t& year, Int_t& month, Int_t& day, Int_t& hour, Int_t& min, Int_t& sec);
    virtual Bool_t      GetTimestamp(Int_t npar, Int_t& year, Int_t& month, Int_t& day, Int_t& hour, Int_t& min, Int_t& sec, Int_t&);
+   
+   
 
    ClassDef(TPgSQLStatement, 0);  // SQL statement class for PgSQL DB
 };
diff --git a/sql/pgsql/src/TPgSQLStatement.cxx b/sql/pgsql/src/TPgSQLStatement.cxx
index 1d80f11..b86f3a9 100644
--- a/sql/pgsql/src/TPgSQLStatement.cxx
+++ b/sql/pgsql/src/TPgSQLStatement.cxx
@@ -23,6 +23,8 @@
 #include "TTimeStamp.h"
 
 #include <stdlib.h>
+#include <arpa/inet.h>
+
 
 ClassImp(TPgSQLStatement)
 
@@ -31,7 +33,6 @@ ClassImp(TPgSQLStatement)
 #include "libpq/libpq-fs.h"
 
 static const Int_t kBindStringSize = 25;
-
 //______________________________________________________________________________
 TPgSQLStatement::TPgSQLStatement(PgSQL_Stmt_t* stmt, Bool_t errout):
    TSQLStatement(errout),
@@ -43,6 +44,7 @@ TPgSQLStatement::TPgSQLStatement(PgSQL_Stmt_t* stmt, Bool_t errout):
    fIterationCount(0),
    fParamLengths(0),
    fParamFormats(0),
+   fResultFormat(0),
    fNumResultRows(0),
    fNumResultCols(0)
 {
@@ -66,6 +68,7 @@ TPgSQLStatement::TPgSQLStatement(PgSQL_Stmt_t* stmt, Bool_t errout):
       fWorkingMode = 2;
       SetBuffersNumber(fNumResultCols);
    }
+   fLittleEndian = ntohl(0x1)!=0x1;
 }
 
 //______________________________________________________________________________
@@ -165,11 +168,13 @@ Bool_t TPgSQLStatement::Process()
    if (IsSetParsMode()) {
       fStmt->fRes= PQexecPrepared(fStmt->fConn,"preparedstmt",fNumBuffers,
                                  (const char* const*)fBind,
-                                 0,0,0);
+                                 fParamLengths,
+                                 fParamFormats,
+                                 fResultFormat);
 
    } else { //result set mode
 
-      fStmt->fRes= PQexecPrepared(fStmt->fConn,"preparedstmt",0,(const char* const*) 0,0,0,0);
+      fStmt->fRes= PQexecPrepared(fStmt->fConn,"preparedstmt",0,(const char* const*) 0,0,0, fResultFormat);
    }
    ExecStatusType stat = PQresultStatus(fStmt->fRes);
    if (!pgsql_success(stat))
@@ -260,6 +265,12 @@ Bool_t TPgSQLStatement::NextResultRow()
 }
 
 //______________________________________________________________________________
+Bool_t TPgSQLStatement::SetResultFormat( Int_t binaryformat )
+{
+   fResultFormat = binaryformat;
+   return kTRUE;
+}
+//______________________________________________________________________________
 Bool_t TPgSQLStatement::NextIteration()
 {
    // Increment iteration counter for statement, where parameter can be set.
@@ -279,9 +290,10 @@ Bool_t TPgSQLStatement::NextIteration()
 
    fStmt->fRes= PQexecPrepared(fStmt->fConn,"preparedstmt",fNumBuffers,
                                (const char* const*)fBind,
-                               0,//fParamLengths,
-                               0,//fParamFormats,
-                               0);
+                               fParamLengths,
+                               fParamFormats,
+                               fResultFormat
+                               );
    ExecStatusType stat = PQresultStatus(fStmt->fRes);
    if (!pgsql_success(stat) ){
       CheckErrNo("NextIteration", kTRUE, kFALSE) ;
@@ -372,13 +384,30 @@ Bool_t TPgSQLStatement::IsNull(Int_t npar)
 }
 
 //______________________________________________________________________________
+const char * TPgSQLStatement::GetNToH(Int_t npar)
+{
+
+char *val = (char*) PQgetvalue(fStmt->fRes,fIterationCount,npar);
+if (!fLittleEndian) return  (const char*) val;
+char t;
+for( int i = 0;i< fParamLengths[npar]/2;i++ ){
+  t = *(val+i);
+  *(val+i) = *(val+fParamLengths[npar]-1-i);
+  *(val+fParamLengths[npar]-1-i)=t;
+}
+
+return  (const char*) val;
+}
+
+//______________________________________________________________________________
 Int_t TPgSQLStatement::GetInt(Int_t npar)
 {
    // Get integer.
 
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
-      return (Int_t)0;
-
+      return (Int_t)0;  
+   if ( fResultFormat ) return  *((Int_t *) GetNToH( npar ));
+   else 
    return (Int_t) atoi(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 }
 
@@ -390,6 +419,8 @@ UInt_t TPgSQLStatement::GetUInt(Int_t npar)
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
       return (UInt_t)0;
 
+   if ( fResultFormat ) return *((UInt_t *) GetNToH( npar ));
+   else 
    return (UInt_t) atoi(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 }
 
@@ -400,7 +431,9 @@ Long_t TPgSQLStatement::GetLong(Int_t npar)
 
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
       return (Long_t)0;
-
+   
+   if ( fResultFormat ) return  *((Long_t *) GetNToH( npar ));
+   else 
    return (Long_t) atol(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 }
 
@@ -412,6 +445,7 @@ Long64_t TPgSQLStatement::GetLong64(Int_t npar)
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
       return (Long64_t)0;
 
+   if ( fResultFormat ) return *((Long64_t *) GetNToH( npar )); else 
 #ifndef R__WIN32
    return (Long64_t) atoll(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 #else
@@ -427,6 +461,7 @@ ULong64_t TPgSQLStatement::GetULong64(Int_t npar)
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
       return (ULong64_t)0;
 
+   if ( fResultFormat ) return  *((ULong64_t *) GetNToH( npar )); else
 #ifndef R__WIN32
    return (ULong64_t) atoll(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 #else
@@ -441,6 +476,9 @@ Double_t TPgSQLStatement::GetDouble(Int_t npar)
 
    if (PQgetisnull(fStmt->fRes,fIterationCount,npar))
       return (Double_t)0;
+   
+   if ( fResultFormat ) return  *((Double_t *) GetNToH( npar )); 
+   else 
    return (Double_t) atof(PQgetvalue(fStmt->fRes,fIterationCount,npar));
 }
 
@@ -460,14 +498,17 @@ Bool_t TPgSQLStatement::GetBinary(Int_t npar, void* &mem, Long_t& size)
 
    size_t sz;
    char *cptr = PQgetvalue(fStmt->fRes,fIterationCount,npar);
-   unsigned char * mptr = PQunescapeBytea((const unsigned char*)cptr,&sz);
+  
+   unsigned char * mptr = ( unsigned char *) cptr;
+   if ( ! fResultFormat )  mptr = PQunescapeBytea((const unsigned char*)cptr,&sz);   
+   else                      sz = PQgetlength(fStmt->fRes,fIterationCount,npar);
    if ((Long_t)sz>size) {
-      delete [] (unsigned char*) mem;
+      if (mem!=NULL) delete [] (unsigned char*) mem;
       mem = (void*) new unsigned char[sz];
    }
    size=sz;
    memcpy(mem,mptr,sz);
-   PQfreemem(mptr);
+   if ( !fResultFormat )  PQfreemem(mptr);
    return kTRUE;
 }
 
@@ -677,17 +718,35 @@ Bool_t TPgSQLStatement::SetNull(Int_t npar)
    //    stmt->SetNull(2);
 
    fBind[npar][0] = 0;
+   fParamFormats[npar] = 0;
+   
+   return kTRUE;
+}
+
+//______________________________________________________________________________
+Bool_t TPgSQLStatement::SetBinaryRaw(Int_t npar, void *value, Long_t size)
+{
+   // Set parameter value as raw binary data
 
+   if (size> kBindStringSize) {
+     delete [] fBind[npar];
+     fBind[npar]= new char[size];
+   }  
+   memcpy(fBind[npar],value, size);
+   fParamFormats[npar] = 1;
+   fParamLengths[npar] = size;
+    
    return kTRUE;
 }
 
+
 //______________________________________________________________________________
 Bool_t TPgSQLStatement::SetInt(Int_t npar, Int_t value)
 {
    // Set parameter value as integer.
-
    snprintf(fBind[npar],kBindStringSize,"%d",value);
-
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -697,6 +756,7 @@ Bool_t TPgSQLStatement::SetUInt(Int_t npar, UInt_t value)
    // Set parameter value as unsinged integer.
 
    snprintf(fBind[npar],kBindStringSize,"%u",value);
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -707,6 +767,7 @@ Bool_t TPgSQLStatement::SetLong(Int_t npar, Long_t value)
    // Set parameter value as long.
 
    snprintf(fBind[npar],kBindStringSize,"%ld",value);
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -717,6 +778,7 @@ Bool_t TPgSQLStatement::SetLong64(Int_t npar, Long64_t value)
    // Set parameter value as 64-bit integer.
 
    snprintf(fBind[npar],kBindStringSize,"%lld",(Long64_t)value);
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -727,6 +789,7 @@ Bool_t TPgSQLStatement::SetULong64(Int_t npar, ULong64_t value)
    // Set parameter value as unsinged 64-bit integer.
 
    snprintf(fBind[npar],kBindStringSize,"%llu",(ULong64_t)value);
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -737,6 +800,7 @@ Bool_t TPgSQLStatement::SetDouble(Int_t npar, Double_t value)
    // Set parameter value as double value.
 
    snprintf(fBind[npar],kBindStringSize,"%lf",value);
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -751,6 +815,8 @@ Bool_t TPgSQLStatement::SetString(Int_t npar, const char* value, Int_t maxsize)
       fBind[npar] = new char[maxsize];
    }
    strlcpy(fBind[npar],value,maxsize);
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -761,13 +827,13 @@ Bool_t TPgSQLStatement::SetBinary(Int_t npar, void* mem, Long_t size, Long_t max
 
    size_t sz=size;
    size_t mxsz=maxsize;
-   char* mptr = (char*)malloc(2*sz+1);
-   mxsz=PQescapeString (mptr,(char*)mem,sz);
-
+   unsigned char* mptr = PQescapeBytea ((const unsigned char*)mem,sz, &mxsz); 
    delete [] fBind[npar];
    fBind[npar]= new char[mxsz+1];
    memcpy(fBind[npar],mptr,mxsz);
-   free(mptr);
+   PQfreemem(mptr); 
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -831,6 +897,7 @@ Bool_t TPgSQLStatement::SetDate(Int_t npar, Int_t year, Int_t month, Int_t day)
 
    TDatime d =TDatime(year,month,day,0,0,0);
    snprintf(fBind[npar],kBindStringSize,"%s",(char*)d.AsSQLString());
+   fParamFormats[npar] = 0;
 
    return kTRUE;
 }
@@ -842,6 +909,8 @@ Bool_t TPgSQLStatement::SetTime(Int_t npar, Int_t hour, Int_t min, Int_t sec)
 
    TDatime d=TDatime(2000,1,1,hour,min,sec);
    snprintf(fBind[npar],kBindStringSize,"%s",(char*)d.AsSQLString());
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -852,6 +921,8 @@ Bool_t TPgSQLStatement::SetDatime(Int_t npar, Int_t year, Int_t month, Int_t day
 
    TDatime d=TDatime(year,month,day,hour,min,sec);
    snprintf(fBind[npar],kBindStringSize,"%s",(char*)d.AsSQLString());
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -865,6 +936,8 @@ Bool_t TPgSQLStatement::SetTimestamp(Int_t npar, Int_t year, Int_t month, Int_t
 
    TDatime d(year,month,day,hour,min,sec);
    snprintf(fBind[npar],kBindStringSize,"%s.%06d",(char*)d.AsSQLString(),frac);
+   fParamFormats[npar] = 0;
+   
    return kTRUE;
 }
 
@@ -946,7 +1019,12 @@ Bool_t TPgSQLStatement::NextResultRow()
    return kFALSE;
 }
 
+//______________________________________________________________________________
 
+Bool_t TPgSQLStatement::SetResultFormat( Int_t )
+{
+   return kFALSE;
+}
 //______________________________________________________________________________
 Bool_t TPgSQLStatement::NextIteration()
 {
@@ -1120,7 +1198,11 @@ Bool_t TPgSQLStatement::SetNull(Int_t)
 
    return kFALSE;
 }
-
+//______________________________________________________________________________
+Bool_t TPgSQLStatement::SetBinaryRaw(Int_t , void *, Long_t )
+{ 
+   return kFALSE;
+}
 //______________________________________________________________________________
 Bool_t TPgSQLStatement::SetInt(Int_t, Int_t)
 {
diff --git a/etc/system.plugins-ios b/etc/system.plugins-ios
--- a/etc/system.plugins-ios
+++ b/etc/system.plugins-ios
@@ -152,3 +152,5 @@
 +Plugin.TVirtualX: win32 TGWin32 Win32 "TGWin32(const char*,const char*)"
 +Plugin.TVirtualX: win32gdk TGWin32 Win32gdk "TGWin32(const char*,const char*)"
 +Plugin.TVirtualX: qt TGQt GQt "TGQt(const char*,const char*)"
+Plugin.TMVA@@MethodBase: .*_NeuroBayes.*     TMVA::MethodNeuroBayes TMVANeuroBayes "MethodNeuroBayes(DataSetInfo&,TString)"
++Plugin.TMVA@@MethodBase:  .*NeuroBayes.* TMVA::MethodNeuroBayes TMVANeuroBayes "MethodNeuroBayes(TString&,TString&,DataSetInfo&,TString&)"
